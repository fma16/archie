!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).littlefoot={})}(this,function(e){"use strict";function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}function n(e){var t=parseFloat(E.getStyle(e,"marginLeft")),n=e.offsetWidth-t,r=e.offsetHeight,o=e.getBoundingClientRect(),i=o.left+n/2,a=o.top+r/2;return{top:a,bottom:window.innerHeight-a,leftRelative:i/window.innerWidth}}function r(e,t){var n=2*parseInt(E.getStyle(e,"marginTop"),10)+e.offsetHeight;return t.bottom<n&&t.bottom<t.top}function o(e){var t;null!==(t=e.parentNode)&&void 0!==t&&t.removeChild(e)}function i(e){var t=e.id,i=e.button,a=e.content,c=e.host,s=e.popover,u=e.wrapper,l=!1,f=0;return{id:t,activate:function(e){i.classList.add(H),i.setAttribute("aria-expanded","true"),i.classList.add(D),i.insertAdjacentElement("afterend",s),s.style.maxWidth=document.body.clientWidth+"px";var t=E.getStyle(a,"maxHeight");f=Math.round(k.pixels(t,a)),"function"==typeof e&&e(s,i)},dismiss:function(e){i.classList.add(H),i.setAttribute("aria-expanded","false"),i.classList.remove(D),"function"==typeof e&&e(s,i)},isActive:function(){return i.classList.contains(D)},isReady:function(){return!i.classList.contains(H)},isHovered:function(){return l},ready:function(){s.classList.add(D),i.classList.remove(H)},remove:function(){o(s),i.classList.remove(H)},reposition:function(){if(s.parentElement){var e=n(i),t=Math.min(f,(h=r(p=s,v=e),m=parseInt(E.getStyle(p,"marginTop"),10),v[h?M:T]-m-15));a.style.maxHeight=t+"px",u=r(o=s,c=e),(l=o.dataset.footnotePosition)!==(d=u?M:T)&&(o.dataset.footnotePosition=d,o.classList.remove(""+j+l),o.classList.add(""+j+d),o.style.transformOrigin=100*c.leftRelative+"% "+(u?"100%":"0")),s.offsetHeight<a.scrollHeight?(s.classList.add(I),a.setAttribute("tabindex","0")):(s.classList.remove(I),a.removeAttribute("tabindex"))}var o,c,u,l,d,p,v,h,m},resize:function(){if(s.parentElement){var e=n(i),t=a.offsetWidth,r=parseInt(E.getStyle(i,"marginLeft"),10),o=-e.leftRelative*t+r+i.offsetWidth/2;s.style.left=o+"px",u.style.maxWidth=t+"px",c=s,l=e.leftRelative,(f=c.querySelector("."+L))&&(f.style.left=100*l+"%")}var c,l,f},startHovering:function(){l=!0},stopHovering:function(){l=!1},destroy:function(){o(c)}}}function a(e){return e.target}function c(e){return null==e?void 0:e.dataset.footnoteId}function s(e,t){return function(n){n.preventDefault();var r=c(a(n).closest(q)),o=r&&e(r);o&&t(o)}}function u(e,t){var n;e.addEventListener("wheel",R.throttle((n=t,function(e){var t=e.currentTarget,r=-e.deltaY;0<r&&n.classList.remove(V),t&&r<=0&&r<t.clientHeight+t.scrollTop-t.scrollHeight&&n.classList.add(V)}),z))}function l(e){var t,n,r,o,i=e.dismissAll,u=e.lookup,l=e.hover,f=e.repositionAll,d=e.resizeAll,p=e.toggle,v=e.unhover,h=(t=u,n=p,function(e){var o=c(a(e).closest(C)),i=o&&t(o);i?n(i):a(e).closest(U)||r()}),m=(o=r=i,function(e){27===e.keyCode&&o()}),y=R.throttle(f,z),g=R.throttle(d,z),b=s(u,l),w=s(u,v);return document.addEventListener("touchend",h),document.addEventListener("click",h),document.addEventListener("keyup",m),document.addEventListener("gestureend",y),window.addEventListener("scroll",y),window.addEventListener("resize",g),W.on("mouseover",q,b),W.on("mouseout",q,w),function(){document.removeEventListener("touchend",h),document.removeEventListener("click",h),document.removeEventListener("keyup",m),document.removeEventListener("gestureend",y),window.removeEventListener("scroll",y),window.removeEventListener("resize",g),W.off("mouseover",q,b),W.off("mouseout",q,w)}}function f(e,t){return Array.from(e.querySelectorAll(t))}function d(e,t){return e.querySelector("."+t)||e.firstElementChild||e}function p(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function v(e){return void 0!==e}function h(e){var t,n,r=(t=e,n=":not(."+N+")",Array.from(t.children).filter(function(e){return 8!==e.nodeType&&(!n||e.matches(n))})),o=r.filter(function(e){return"HR"===e.tagName});r.length===o.length&&(o.concat(e).forEach($),h(e.parentElement))}function m(e){var t=e.parentElement;o(e);var n=null==t?void 0:t.innerHTML.replace("[]","").replace("&nbsp;"," ").trim();t&&!n&&m(t)}function y(e,t){var n=p(e.body.outerHTML);f(n,'[href$="#'+e.referenceId+'"]').forEach(m);var r=n.innerHTML.trim();return{original:e,data:{id:""+(t+1),number:t+1,reference:"lf-"+e.referenceId,content:r.startsWith("<")?r:"<p>"+r+"</p>"}}}function g(e){var t=/<%=?\s*(\w+?)\s*%>/g;return function(n){return e.replace(t,function(e,t){var r;return String(null!==(r=n[t])&&void 0!==r?r:"")})}}function b(e){var t,n,r,o,a,c,s,l,m,b=e.allowDuplicates,w=e.anchorParentSelector,_=e.anchorPattern,x=e.buttonTemplate,S=e.contentTemplate,E=e.footnoteSelector,L=e.numberResetSelector,j=e.scope,T=(l=document,m=_,f(l,j+' a[href*="#"]').filter(function(e){return(e.href+e.rel).match(m)}).map((r=document,o=b,a=w,c=E,s=[],function(e){var t="#"+e.href.split("#")[1].replace(/[:.+~*[\]]/g,"\\$&"),n=f(r,t).find(function(e){return o||!s.includes(e)}),i=null==n?void 0:n.closest(c);if(i){s.push(i);var u=e.closest(a)||e;return{reference:u,referenceId:u.id||e.id,body:i}}})).filter(v).map(y).map(L?B(L):function(e){return e}).map((t=g(x),n=g(S),function(e){var r=e.original,o=e.data,i=o.id,a=p('<span class="'+G+'">'+t(o)+"</span>"),c=a.firstElementChild;c.dataset.footnoteButton="",c.dataset.footnoteId=i,c.dataset.footnoteNumber=""+o.number;var s=p(n(o));s.dataset.footnotePopover="",s.dataset.footnoteId=i;var l=d(s,P),f=d(s,O);return u(f,s),{original:r,data:o,id:i,button:c,host:a,popover:s,content:f,wrapper:l}})));return T.forEach(function(e){var t,n,r=e.original,o=e.host;$(r.reference),$(r.body),h(r.body.parentElement),t=r.reference,n=o,t.insertAdjacentElement("beforebegin",n)}),T.map(i)}function w(e){e.forEach(function(e){return e.destroy()}),f(document,"."+N).forEach(function(e){return e.classList.remove(N)})}function _(e){function t(e,t){e.isReady()&&(e.dismiss(o.dismissCallback),setTimeout(function(){e.remove()},t))}function n(e,n){o.allowMultiple||i.filter(function(t){return t.id!==e.id}).forEach(function(e){return t(e,o.dismissDelay)}),e.isReady()&&(e.activate(o.activateCallback),e.reposition(),e.resize(),setTimeout(function(){e.ready()},n))}void 0===e&&(e={});var r,o,i,a,c,s=S.__assign(S.__assign({},A),e),u=(i=(r={setup:b,addListeners:l,cleanup:w}).setup(o=s),a={activate:n,dismiss:t,lookup:function(e){return i.find(function(t){return t.id===e})},dismissAll:function(){i.forEach(function(e){return t(e,o.dismissDelay)})},repositionAll:function(){i.forEach(function(e){return e.reposition()})},resizeAll:function(){i.forEach(function(e){return e.resize()})},toggle:function(e){e.isActive()?t(e,o.dismissDelay):n(e,o.activateDelay)},hover:function(e){e.startHovering(),o.activateOnHover&&!e.isActive()&&n(e,o.hoverDelay)},unhover:function(e){e.stopHovering(),o.dismissOnUnhover&&setTimeout(function(){i.filter(function(e){return!e.isHovered()}).forEach(function(e){return t(e,o.dismissDelay)})},o.hoverDelay)}},c=r.addListeners(a),S.__assign(S.__assign({},a),{unmount:function(){c(),r.cleanup(i)}}));return{activate:function(e,t){void 0===t&&(t=s.activateDelay);var n=u.lookup(e);n&&u.activate(n,t)},dismiss:function(e,t){void 0===t&&(t=s.dismissDelay);var n=e&&u.lookup(e);n?u.dismiss(n,t):u.dismissAll()},unmount:u.unmount,getSetting:function(e){return s[e]},updateSetting:function(e,t){s[e]=t}}}var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},S=t(function(e){var t,n,r,o,i,a,c,s,u,l,f,d,p,v,h,m,y,g,b,w,_,S;!function(){function E(e,t){return e!==P&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(n,r){return e[n]=t?t(n,r):r}}var O,L,P="object"==typeof x?x:"object"==typeof self?self:"object"==typeof this?this:{};O=E(P,E(e.exports)),L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},t=function(e,t){function n(){this.constructor=e}L(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},o=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;0<=c;c--)(o=e[c])&&(a=(i<3?o(a):3<i?o(t,n,a):o(t,n))||a);return 3<i&&a&&Object.defineProperty(t,n,a),a},i=function(e,t){return function(n,r){t(n,r,e)}},a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e,t,n,r){return new(n=n||Promise)(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((r=r.apply(e,t||[])).next())})},s=function(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(!(i=0<(i=c.trys).length&&i[i.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){c.label=n[1];break}if(6===n[0]&&c.label<i[1]){c.label=i[1],i=n;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(n);break}i[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{r=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,o,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},u=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},d=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e},p=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r},v=function(e){return this instanceof v?(this.v=e,this):new v(e)},h=function(e,t,n){function r(e){u[e]&&(s[e]=function(t){return new Promise(function(n,r){1<l.push([e,t,n,r])||o(e,t)})})}function o(e,t){try{(n=u[e](t)).value instanceof v?Promise.resolve(n.value.v).then(i,a):c(l[0][2],n)}catch(e){c(l[0][3],e)}var n}function i(e){o("next",e)}function a(e){o("throw",e)}function c(e,t){e(t),l.shift(),l.length&&o(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,u=n.apply(e,t||[]),l=[];return s={},r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s},m=function(e){function t(t,o){n[t]=e[t]?function(n){return(r=!r)?{value:v(e[t](n)),done:"return"===t}:o?o(n):n}:o}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n},y=function(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(r,o){var i,a,c,s;n=e[t](n),i=r,a=o,c=n.done,s=n.value,Promise.resolve(s).then(function(e){i({value:e,done:c})},a)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=l(e),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)},g=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},w=function(e){return e&&e.__esModule?e:{default:e}},_=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},S=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},O("__extends",t),O("__assign",n),O("__rest",r),O("__decorate",o),O("__param",i),O("__metadata",a),O("__awaiter",c),O("__generator",s),O("__exportStar",u),O("__values",l),O("__read",f),O("__spread",d),O("__spreadArrays",p),O("__await",v),O("__asyncGenerator",h),O("__asyncDelegator",m),O("__asyncValues",y),O("__makeTemplateObject",g),O("__importStar",b),O("__importDefault",w),O("__classPrivateFieldGet",_),O("__classPrivateFieldSet",S)}()}),E=t(function(e,t){t.__esModule=!0,t.getStyle=function(e,t){var n,r=((null===(n=e.ownerDocument)||void 0===n?void 0:n.defaultView)||window).getComputedStyle(e);return r.getPropertyValue(t)||r[t]}}),O="littlefoot-footnote__content",L="littlefoot-footnote__tooltip",P="littlefoot-footnote__wrapper",j="is-positioned-",T="bottom",M="top",A={activateDelay:100,activateOnHover:!1,allowDuplicates:!0,allowMultiple:!1,anchorParentSelector:"sup",anchorPattern:/(fn|footnote|note)[:\-_\d]/gi,dismissDelay:100,dismissOnUnhover:!1,footnoteSelector:"li",hoverDelay:250,numberResetSelector:"",scope:"",contentTemplate:'<aside class="littlefoot-footnote" id="fncontent:<% id %>"><div class="'+P+'"><div class="'+O+'"><% content %></div></div><div class="'+L+'"></div></aside>',buttonTemplate:'<button class="littlefoot-footnote__button littlefoot-footnote__button__ellipsis" id="<% reference %>" title="See Footnote <% number %>" aria-expanded="false"><svg role="img" aria-labelledby="title-<% reference %>" viewbox="0 0 31 6" preserveAspectRatio="xMidYMid"><title id="title-<% reference %>">Footnote <% number %></title><circle r="3" cx="3" cy="3" fill="white"></circle><circle r="3" cx="15" cy="3" fill="white"></circle><circle r="3" cx="27" cy="3" fill="white"></circle></svg></button>'},k=t(function(e,t){function n(e){return e?E.getStyle(e,"fontSize")||n(e.parentElement):E.getStyle(window.document.documentElement,"fontSize")}t.__esModule=!0;var r=96,o=25.4,i=72,a=6;t.pixels=function e(t,c){var s,u,l,f,d,p,v=null!=(u=null===(s=null==c?void 0:c.ownerDocument)||void 0===s?void 0:s.defaultView)?u:window,h=v.document.documentElement||v.document.body,m=(f=t||"0",d=parseFloat(f),p=f.match(/[\d-.]+(\w+)$/),[d,(null!=(l=null==p?void 0:p[1])?l:"").toLowerCase()]),y=m[0];switch(m[1]){case"rem":return y*e(n(window.document.documentElement));case"em":return y*e(n(c),null==c?void 0:c.parentElement);case"in":return y*r;case"q":return y*r/o/4;case"mm":return y*r/o;case"cm":return y*r*10/o;case"pt":return y*r/i;case"pc":return y*r/a;case"vh":return(y*v.innerHeight||h.clientWidth)/100;case"vw":return(y*v.innerWidth||h.clientHeight)/100;case"vmin":return y*Math.min(v.innerWidth||h.clientWidth,v.innerHeight||h.clientHeight)/100;case"vmax":return y*Math.max(v.innerWidth||h.clientWidth,v.innerHeight||h.clientHeight)/100;default:return y}}}),D="is-active",H="is-changing",I="is-scrollable",R=t(function(e,t){t.__esModule=!0,t.throttle=function(e,t){void 0===t&&(t=0);var n,r=0;return Object.assign(function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=Math.max(0,r+t-Date.now());a?(clearTimeout(n),n=setTimeout(function(){r=Date.now(),e.apply(void 0,o)},a)):(r=Date.now(),e.apply(void 0,o))},{cancel:function(){r=0,clearTimeout(n)}})}}),F=t(function(e,t){e.exports=function(){function e(){if(!(this instanceof e))return new e;this.size=0,this.uid=0,this.selectors=[],this.selectorObjects={},this.indexes=Object.create(this.indexes),this.activeIndexes=[]}function t(e,t){e=e.slice(0).concat(e.default);var n,r,o,i,a,c,s=e.length,u=t,f=[];do{if(l.exec(""),(o=l.exec(u))&&(u=o[3],o[2]||!u))for(n=0;n<s;n++)if(c=e[n],a=c.selector(o[1])){for(r=f.length,i=!1;r--;)if(f[r].index===c&&f[r].key===a){i=!0;break}i||f.push({index:c,key:a});break}}while(o);return f}function n(e,t){var n,r,o;for(n=0,r=e.length;n<r;n++)if(o=e[n],t.isPrototypeOf(o))return o}function r(e,t){return e.id-t.id}var o=window.document.documentElement,i=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector;e.prototype.matchesSelector=function(e,t){return i.call(e,t)},e.prototype.querySelectorAll=function(e,t){return t.querySelectorAll(e)};var a=/^#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;(e.prototype.indexes=[]).push({name:"ID",selector:function(e){var t;if(t=e.match(a))return t[0].slice(1)},element:function(e){if(e.id)return[e.id]}});var c=/^\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;e.prototype.indexes.push({name:"CLASS",selector:function(e){var t;if(t=e.match(c))return t[0].slice(1)},element:function(e){var t=e.className;if(t){if("string"==typeof t)return t.split(/\s/);if("object"==typeof t&&"baseVal"in t)return t.baseVal.split(/\s/)}}});var s,u=/^((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;e.prototype.indexes.push({name:"TAG",selector:function(e){var t;if(t=e.match(u))return t[0].toUpperCase()},element:function(e){return[e.nodeName.toUpperCase()]}}),e.prototype.indexes.default={name:"UNIVERSAL",selector:function(){return!0},element:function(){return[!0]}},s="function"==typeof window.Map?window.Map:function(){function e(){this.map={}}return e.prototype.get=function(e){return this.map[e+" "]},e.prototype.set=function(e,t){this.map[e+" "]=t},e}();var l=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;return e.prototype.logDefaultIndexUsed=function(){},e.prototype.add=function(e,r){var o,i,a,c,u,l,f,d,p=this.activeIndexes,v=this.selectors,h=this.selectorObjects;if("string"==typeof e){for(h[(o={id:this.uid++,selector:e,data:r}).id]=o,f=t(this.indexes,e),i=0;i<f.length;i++)c=(d=f[i]).key,(u=n(p,a=d.index))||((u=Object.create(a)).map=new s,p.push(u)),a===this.indexes.default&&this.logDefaultIndexUsed(o),(l=u.map.get(c))||(l=[],u.map.set(c,l)),l.push(o);this.size++,v.push(e)}},e.prototype.remove=function(e,n){if("string"==typeof e){var r,o,i,a,c,s,u,l,f=this.activeIndexes,d=this.selectors=[],p=this.selectorObjects,v={},h=1===arguments.length;for(r=t(this.indexes,e),i=0;i<r.length;i++)for(o=r[i],a=f.length;a--;)if(s=f[a],o.index.isPrototypeOf(s)){if(u=s.map.get(o.key))for(c=u.length;c--;)(l=u[c]).selector!==e||!h&&l.data!==n||(u.splice(c,1),v[l.id]=!0);break}for(i in v)delete p[i],this.size--;for(i in p)d.push(p[i].selector)}},e.prototype.queryAll=function(e){if(!this.selectors.length)return[];var t,n,o,i,a,c,s,u,l={},f=[],d=this.querySelectorAll(this.selectors.join(", "),e);for(t=0,o=d.length;t<o;t++)for(a=d[t],n=0,i=(c=this.matches(a)).length;n<i;n++)l[(u=c[n]).id]?s=l[u.id]:(s={id:u.id,selector:u.selector,data:u.data,elements:[]},l[u.id]=s,f.push(s)),s.elements.push(a);return f.sort(r)},e.prototype.matches=function(e){if(!e)return[];var t,n,o,i,a,c,s,u,l,f,d,p=this.activeIndexes,v={},h=[];for(t=0,i=p.length;t<i;t++)if(u=(s=p[t]).element(e))for(n=0,a=u.length;n<a;n++)if(l=s.map.get(u[n]))for(o=0,c=l.length;o<c;o++)!v[d=(f=l[o]).id]&&this.matchesSelector(e,f.selector)&&(v[d]=!0,h.push(f));return h.sort(r)},e}()}),W=t(function(e,t){!function(e,t){function n(e,t,n){var r=e[t];return e[t]=function(){return n.apply(e,arguments),r.apply(e,arguments)},e}function r(e,t,n){var r=[],o=t;do{if(1!==o.nodeType)break;var i=e.matches(o);if(i.length){var a={node:o,observers:i};n?r.unshift(a):r.push(a)}}while(o=o.parentElement);return r}function o(){v.set(this,!0)}function i(){v.set(this,!0),h.set(this,!0)}function a(){return m.get(this)||null}function c(e,t){y&&Object.defineProperty(e,"currentTarget",{configurable:!0,enumerable:!0,get:t||y.get})}function s(e){var t=1===e.eventPhase?p:d,s=t[e.type];if(s){var u=r(s,e.target,1===e.eventPhase);if(u.length){n(e,"stopPropagation",o),n(e,"stopImmediatePropagation",i),c(e,a);for(var l=0,f=u.length;l<f&&!v.get(e);l++){var y=u[l];m.set(e,y.node);for(var g=0,b=y.observers.length;g<b&&!h.get(e);g++)y.observers[g].data.call(y.node,e)}m.delete(e),c(e)}}}function u(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=!!o.capture,a=i?p:d,c=a[e];c||(c=new t,a[e]=c,document.addEventListener(e,s,i)),c.add(n,r)}function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=!!r.capture,i=o?p:d,a=i[e];a&&(a.remove(t,n),a.size||(delete i[e],document.removeEventListener(e,s,o)))}function f(e,t,n){return e.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}))}t=t&&t.hasOwnProperty("default")?t.default:t;var d={},p={},v=new WeakMap,h=new WeakMap,m=new WeakMap,y=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");e.fire=f,e.off=l,e.on=u,Object.defineProperty(e,"__esModule",{value:!0})}(t,F)}),z=16,C="[data-footnote-button]",q="[data-footnote-id]",U="[data-footnote-popover]",V="is-fully-scrolled",N="footnote-print-only",G="littlefoot-footnote__host",$=function(e){return e.classList.add(N)},B=function(e){var t=0,n=null;return function(r){var o=r.original,i=r.data,a=o.reference.closest(e);return t=n===a?t+1:1,n=a,{original:o,data:S.__assign(S.__assign({},i),{number:t})}}};e.default=_,e.littlefoot=_,Object.defineProperty(e,"__esModule",{value:!0})});